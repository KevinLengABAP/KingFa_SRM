sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/odata/ODataModel","sap/ui/model/json/JSONModel"],function(e,t,o,n,r,a){"use strict";return e.extend("ZEC_MY_REQUIREMENTS.controller.BaseController",{getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},convPathToOrder:function(e){return e.substring(e.lastIndexOf("/")+1)},confirmNavBack:function(e,t){if(JSON.stringify(e)!==JSON.stringify(t)){n.show("数据已经变更，确定要退出吗？",{icon:n.Icon.WARNING,title:"退出确认",actions:[n.Action.OK,n.Action.CANCEL],onClose:function(e){if(e===n.Action.OK){this.onNavBack()}}.bind(this)})}else{this.onNavBack()}},onNavBack:function(){var e=t.getInstance().getPreviousHash();if(e!==undefined){history.go(-1)}else{var o=true;this.getRouter().navTo("main",{},o)}},getGlobalVar:function(e){var t;if(this.getOwnerComponent()){t=this.getOwnerComponent().getModel("globalVar");return t.getProperty("/"+e)}else{return this.getParentView(this.getView()).getController().getGlobalVar(e)}},setGlobalVar:function(e,t){var o;if(this.getOwnerComponent()){o=this.getOwnerComponent().getModel("globalVar");return o.setProperty("/"+e,t)}else{return this.getParentView(this.getView()).getController().setGlobalVar(e,t)}},handleComboChange:function(e){var t=e.getSource();var o=e.getSource().data("message");t.setValueState("None");if(!t.getSelectedKey()&&e.getParameters().value){if(t.getRequired){t.setValueState("Error");if(o){t.setValueStateText(o)}}else{t.setValueState("Warning")}}},onMessagePopover:function(e){this._getMessagePopover().openBy(e.getSource())},onClearMessage:function(){sap.ui.getCore().getMessageManager().removeAllMessages()},_getMessagePopover:function(){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment(this.getView().getId(),"ZEC_MY_REQUIREMENTS.view.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}return this._oMessagePopover},showErrorMessage:function(e){if(e.responseText){if(e.headers["Content-Type"].indexOf("application/json")>-1){sap.m.MessageToast.show(JSON.parse(e.responseText).error.message.value)}else{var t=new DOMParser;var o=t.parseFromString(e.responseText,"text/xml");var n=o.getElementsByTagName("message");var r=[];for(var a=0;a<n.length;a++){r[r.length]=n[a].innerHTML}sap.m.MessageToast.show(r)}}},getParentView:function(e){var t=e;while(t&&t.getParent){t=t.getParent();if(t instanceof sap.ui.core.mvc.View){return t}}},compareDate:function(e,t){var o=false;if(e.getFullYear()>t.getFullYear()){o=true}else if(e.getFullYear()==t.getFullYear()){if(e.getMonth()>t.getMonth()){o=true}else if(e.getMonth()==t.getMonth()){if(e.getDate()>t.getDate()){o=true}}}return o},convPicUrl:function(e){var t;var o=window.location.origin;if(o.indexOf("localhost")!==-1){o="http:///srmdevapp.kingfa.com.cn:8800"}if(e.ProductId){t=o+"/sap/opu/odata/SAP/ZPO_ZCATELOG_MAINTAIN_SRV/ZCATELOG_IMAGESet(ZcatelogId='',Lifnr='"+e.Lifnr+"',Matnr='"+e.ProductId+"',ZimageDesc='1')/$value"}else{t=o+"/sap/opu/odata/SAP/ZPO_ZCATELOG_MAINTAIN_SRV/ZCATELOG_IMAGESet(ZcatelogId='"+e.CatalogGuid+"',Lifnr='',Matnr='',ZimageDesc='1')/$value"}return t}})});
//# sourceMappingURL=BaseController.js.map
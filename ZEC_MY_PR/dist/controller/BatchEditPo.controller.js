sap.ui.define(["ZEC_MY_REQUIREMENTS/controller/BaseController","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/routing/History","sap/ui/model/Filter","ZEC_MY_REQUIREMENTS/utils/Validator","ZEC_MY_REQUIREMENTS/utils/ValueHelpHelper"],function(e,t,i,s,l,a,r){"use strict";var o=new t([]);return e.extend("ZEC_PO_CATALOG.controller.BatchEditPo",{onInit:function(){this.getOwnerComponent().getRouter().getRoute("batchEdit").attachPatternMatched(this._onRequestEditMatched,this);this.getView().setModel(o,"BatchEdit")},_onRequestEditMatched:function(e){o.setData({});if(this.getGlobalVar("Bsart")==="KF30"){this.setFieldAttr("A");this.getView().byId("Knttp").setSelectedKey("A");this.getView().byId("Knttp").setEditable(false)}else{this.setFieldAttr("I");this.getView().byId("Knttp").setSelectedKey("I");this.getView().byId("Knttp").setEditable(true)}},handleChangeKnttp:function(e){var t=e.getParameter("selectedItem").getProperty("key");this.setFieldAttr(t)},setFieldAttr:function(e){switch(e){case"A":this.getView().byId("Label_Hkont").setVisible(false);this.getView().byId("Hkont").setVisible(false);this.getView().byId("Label_Kostl").setVisible(false);this.getView().byId("Kostl").setVisible(false);this.getView().byId("Label_Lgort").setVisible(false);this.getView().byId("Lgort").setVisible(false);break;case"I":this.getView().byId("Label_Lgort").setVisible(true);this.getView().byId("Lgort").setVisible(true);this.getView().byId("Label_Hkont").setVisible(false);this.getView().byId("Hkont").setVisible(false);this.getView().byId("Label_Kostl").setVisible(false);this.getView().byId("Kostl").setVisible(false);break;case"K":this.getView().byId("Label_Lgort").setVisible(false);this.getView().byId("Lgort").setVisible(false);this.getView().byId("Label_Hkont").setVisible(true);this.getView().byId("Hkont").setVisible(true);this.getView().byId("Label_Kostl").setVisible(true);this.getView().byId("Kostl").setVisible(true);break}},onWerksChange:function(e){var t=this.getView().byId("Lgort");this.getModel("BatchEdit").setProperty("Lgort",null);t.setValue("")},handleLgortValueHelp:function(e){var t=e.getSource();var i=this.getView().getModel();var s=this.getView().byId("WERKS").getSelectedKey();var a="ZshLgortSet";var o=[new l("Werks",sap.ui.model.FilterOperator.EQ,s)];this.valuehelp=new r(i);this.valuehelp.excludeFilters(["Werks"]);this.valuehelp.excludeColumns(["Werks"]);this.valuehelp.initFilters(o);this.valuehelp.openValueHelp(a,"Lgort","LgortTxt",function(e,i,s){t.setValue(e)})},onApply:function(e){var t=new a;var s=this.byId("CheckLayout");var l=this.getView().getModel("BatchEdit").getData();if(l.Menge!==undefined){if(isNaN(l.Menge)){i.show("数量请输入数字类型");return}if(l.Menge.toString().length>10){i.show("数量长度不得超过10位");return}}if(t.validate(s)){var r=this.getOwnerComponent().getEventBus();r.publish("applyChange",l);this.onNavBack()}},onRequireDetailNavBack:function(){var e=this.getView().getModel("BatchEdit").getData();this.confirmNavBack(e,{})}})});
//# sourceMappingURL=BatchEditPo.controller.js.map